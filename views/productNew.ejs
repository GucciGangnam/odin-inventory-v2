<!DOCTYPE html>
<html>

<head>
    <title>
        New Product
    </title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
    <!-- NAVIGATION BAR -->
    <div class="NavBar">
        <h1>
            Products
        </h1>
        <a class="NavBarLink" href="/">Home</a>
        <a class="NavBarLink" href="/categories">Categories</a>
        <a class="NavBarLink" href="/products">Products</a>
        <input placeholder="Search product" />
    </div>
    <!-- NAVIGATION BAR -->
    <!-- PAGE CONTENT -->
    <!-- if listOfCats is == 0 then render "You must forst add a category + add Categoiry link" -->
    <% if (listOfCats.length> 0) { %>

        <form method="POST" action="">
            <label for="name">Name</label>
            <br />
            <input type="text" name="name" placeholder="Product name" required="true" />
            <br />
            <br />
            <lebal for="description">Description</lebal>
            <br />
            <input type="text" name="description" placeholder="Product description" required="true" />
            <br />
            <br />
            <label for="category">Category</label>
            <br />
            <select name="category" required="true">
                <% listOfCats.forEach(category=> { %>
                    <option value="<%= category.name %>">
                        <%= category.name %>
                    </option>
                    <% }); %>
            </select>
            <br />
            <br />
            <label for="price">Price</label>
            <br />
            <input type="text" name="price" placeholder="Product price" required="true" />
            <br />
            <br />
            <label for="stock">Number in stock</label>
            <br />
            <input type="number" name="stock" placeholder="0" required="true" />
            <br />
            <br />
            <label for="sellBy">Sell by date</label>
            <br />
            <input type="date" name="sellBy" required="true" />
            <br/>
            <br/>
            <button class="button-link" type="submit">Add product</button>
        </form>

        <%} else {%>
            <h1>You must add a category first</h1>
            <br/>
            <a class="button-link" href="/categories/new">Add a category</a>
        <%}%>

        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
            <p>
                ERROR POSTING FORM!
            </p>
            <ul>
                <% errors.forEach(error => { %>
                    <li><%= JSON.stringify(error.msg) %></li>
                <% }); %>
            </ul>
        <% } %>


        <!-- PAGE CONTENT -->
</body>

</html>